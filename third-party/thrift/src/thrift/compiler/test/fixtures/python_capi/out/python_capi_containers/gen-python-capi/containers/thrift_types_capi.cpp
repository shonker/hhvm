
/**
 * Autogenerated by Thrift
 *
 * DO NOT EDIT
 *  @generated
 *
 */

#include <folly/python/import.h>
#include <thrift/lib/python/capi/iobuf.h>
#include <thrift/lib/python/types.h>

#include <thrift/compiler/test/fixtures/python_capi/gen-python-capi/containers/thrift_types_api.h>
#include <thrift/compiler/test/fixtures/python_capi/gen-python-capi/containers/thrift_types_capi.h>


namespace apache {
namespace thrift {
namespace python {
namespace capi {
namespace {
bool ensure_module_imported() {
  static ::folly::python::import_cache_nocapture import((
      ::import_test__fixtures__python_capi__containers__thrift_types_capi));
  return import();
}
  static constexpr std::int16_t _fbthrift__TemplateLists__tuple_pos[5] = {
    1, 2, 3, 4, 5
  };
  static constexpr std::int16_t _fbthrift__TemplateSets__tuple_pos[7] = {
    1, 2, 3, 4, 5, 6, 7
  };
  static constexpr std::int16_t _fbthrift__TemplateMaps__tuple_pos[7] = {
    1, 2, 3, 4, 5, 6, 7
  };
  static constexpr std::int16_t _fbthrift__TWrapped__tuple_pos[2] = {
    1, 2
  };
  static constexpr std::int16_t _fbthrift__IndirectionA__tuple_pos[1] = {
    1
  };
  static constexpr std::int16_t _fbthrift__IndirectionB__tuple_pos[1] = {
    1
  };
  static constexpr std::int16_t _fbthrift__IndirectionC__tuple_pos[1] = {
    1
  };
} // namespace

ExtractorResult<::test::fixtures::python_capi::TemplateLists>
Extractor<::test::fixtures::python_capi::TemplateLists>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a TemplateLists");
      }
      return extractorError<::test::fixtures::python_capi::TemplateLists>(
          "Marshal error: TemplateLists");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::TemplateLists>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::TemplateLists>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::TemplateLists>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::TemplateLists cpp;
  std::optional<std::string_view> error;
  Extractor<list<Bytes, std::vector<native_t<Bytes>>>>{}.extractInto(
      cpp.std_string_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateLists__tuple_pos[0]),
      error);
  Extractor<list<Bytes, std::deque<native_t<Bytes>>>>{}.extractInto(
      cpp.deque_string_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateLists__tuple_pos[1]),
      error);
  Extractor<list<folly::IOBuf, folly::small_vector<native_t<folly::IOBuf>>>>{}.extractInto(
      cpp.small_vector_iobuf_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateLists__tuple_pos[2]),
      error);
  Extractor<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::small_vector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>>{}.extractInto(
      cpp.nested_small_vector_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateLists__tuple_pos[3]),
      error);
  Extractor<list<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::fbvector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>, folly::fbvector<native_t<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::fbvector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>>>>>{}.extractInto(
      cpp.small_vector_tensor_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateLists__tuple_pos[4]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::TemplateLists>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__TemplateLists(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: TemplateLists");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::TemplateLists>::operator()(
    const ::test::fixtures::python_capi::TemplateLists& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateLists>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__TemplateLists(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateLists>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::TemplateLists& val) {
  StrongRef fbthrift_data(createStructTuple(5));
  StrongRef _fbthrift__std_string(
    Constructor<list<Bytes, std::vector<native_t<Bytes>>>>{}
    .constructFrom(val.std_string_ref()));
  if (_fbthrift__std_string.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__TemplateLists__tuple_pos[0],
      Py_None);
  } else
  if (!_fbthrift__std_string ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateLists__tuple_pos[0],
          *_fbthrift__std_string) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__deque_string(
    Constructor<list<Bytes, std::deque<native_t<Bytes>>>>{}
    .constructFrom(val.deque_string_ref()));
  if (!_fbthrift__deque_string ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateLists__tuple_pos[1],
          *_fbthrift__deque_string) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__small_vector_iobuf(
    Constructor<list<folly::IOBuf, folly::small_vector<native_t<folly::IOBuf>>>>{}
    .constructFrom(val.small_vector_iobuf_ref()));
  if (!_fbthrift__small_vector_iobuf ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateLists__tuple_pos[2],
          *_fbthrift__small_vector_iobuf) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__nested_small_vector(
    Constructor<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::small_vector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>>{}
    .constructFrom(val.nested_small_vector_ref()));
  if (!_fbthrift__nested_small_vector ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateLists__tuple_pos[3],
          *_fbthrift__nested_small_vector) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__small_vector_tensor(
    Constructor<list<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::fbvector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>, folly::fbvector<native_t<list<list<Bytes, folly::fbvector<native_t<Bytes>>>, folly::fbvector<native_t<list<Bytes, folly::fbvector<native_t<Bytes>>>>>>>>>>{}
    .constructFrom(val.small_vector_tensor_ref()));
  if (!_fbthrift__small_vector_tensor ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateLists__tuple_pos[4],
          *_fbthrift__small_vector_tensor) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::TemplateSets>
Extractor<::test::fixtures::python_capi::TemplateSets>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a TemplateSets");
      }
      return extractorError<::test::fixtures::python_capi::TemplateSets>(
          "Marshal error: TemplateSets");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::TemplateSets>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::TemplateSets>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::TemplateSets>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::TemplateSets cpp;
  std::optional<std::string_view> error;
  Extractor<set<Bytes, std::set<native_t<Bytes>>>>{}.extractInto(
      cpp.std_set_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[0]),
      error);
  Extractor<set<Bytes, std::unordered_set<native_t<Bytes>>>>{}.extractInto(
      cpp.std_unordered_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[1]),
      error);
  Extractor<set<Bytes, folly::F14FastSet<native_t<Bytes>>>>{}.extractInto(
      cpp.folly_fast_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[2]),
      error);
  Extractor<set<Bytes, folly::F14NodeSet<native_t<Bytes>>>>{}.extractInto(
      cpp.folly_node_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[3]),
      error);
  Extractor<set<Bytes, folly::F14ValueSet<native_t<Bytes>>>>{}.extractInto(
      cpp.folly_value_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[4]),
      error);
  Extractor<set<Bytes, folly::F14VectorSet<native_t<Bytes>>>>{}.extractInto(
      cpp.folly_vector_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[5]),
      error);
  Extractor<set<Bytes, folly::sorted_vector_set<native_t<Bytes>>>>{}.extractInto(
      cpp.folly_sorted_vector_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateSets__tuple_pos[6]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::TemplateSets>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__TemplateSets(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: TemplateSets");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::TemplateSets>::operator()(
    const ::test::fixtures::python_capi::TemplateSets& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateSets>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__TemplateSets(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateSets>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::TemplateSets& val) {
  StrongRef fbthrift_data(createStructTuple(7));
  StrongRef _fbthrift__std_set(
    Constructor<set<Bytes, std::set<native_t<Bytes>>>>{}
    .constructFrom(val.std_set_ref()));
  if (!_fbthrift__std_set ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[0],
          *_fbthrift__std_set) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__std_unordered(
    Constructor<set<Bytes, std::unordered_set<native_t<Bytes>>>>{}
    .constructFrom(val.std_unordered_ref()));
  if (!_fbthrift__std_unordered ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[1],
          *_fbthrift__std_unordered) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_fast(
    Constructor<set<Bytes, folly::F14FastSet<native_t<Bytes>>>>{}
    .constructFrom(val.folly_fast_ref()));
  if (!_fbthrift__folly_fast ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[2],
          *_fbthrift__folly_fast) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_node(
    Constructor<set<Bytes, folly::F14NodeSet<native_t<Bytes>>>>{}
    .constructFrom(val.folly_node_ref()));
  if (!_fbthrift__folly_node ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[3],
          *_fbthrift__folly_node) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_value(
    Constructor<set<Bytes, folly::F14ValueSet<native_t<Bytes>>>>{}
    .constructFrom(val.folly_value_ref()));
  if (!_fbthrift__folly_value ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[4],
          *_fbthrift__folly_value) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_vector(
    Constructor<set<Bytes, folly::F14VectorSet<native_t<Bytes>>>>{}
    .constructFrom(val.folly_vector_ref()));
  if (!_fbthrift__folly_vector ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[5],
          *_fbthrift__folly_vector) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_sorted_vector(
    Constructor<set<Bytes, folly::sorted_vector_set<native_t<Bytes>>>>{}
    .constructFrom(val.folly_sorted_vector_ref()));
  if (!_fbthrift__folly_sorted_vector ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateSets__tuple_pos[6],
          *_fbthrift__folly_sorted_vector) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::TemplateMaps>
Extractor<::test::fixtures::python_capi::TemplateMaps>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a TemplateMaps");
      }
      return extractorError<::test::fixtures::python_capi::TemplateMaps>(
          "Marshal error: TemplateMaps");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::TemplateMaps>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::TemplateMaps>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::TemplateMaps>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::TemplateMaps cpp;
  std::optional<std::string_view> error;
  Extractor<map<Bytes, Bytes, std::map<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.std_map_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[0]),
      error);
  Extractor<map<Bytes, Bytes, std::unordered_map<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.std_unordered_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[1]),
      error);
  Extractor<map<Bytes, Bytes, folly::F14FastMap<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.folly_fast_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[2]),
      error);
  Extractor<map<Bytes, Bytes, folly::F14NodeMap<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.folly_node_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[3]),
      error);
  Extractor<map<Bytes, Bytes, folly::F14ValueMap<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.folly_value_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[4]),
      error);
  Extractor<map<Bytes, Bytes, folly::F14VectorMap<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.folly_vector_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[5]),
      error);
  Extractor<map<Bytes, Bytes, folly::sorted_vector_map<native_t<Bytes>, native_t<Bytes>>>>{}.extractInto(
      cpp.folly_sorted_vector_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TemplateMaps__tuple_pos[6]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::TemplateMaps>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__TemplateMaps(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: TemplateMaps");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::TemplateMaps>::operator()(
    const ::test::fixtures::python_capi::TemplateMaps& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateMaps>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__TemplateMaps(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TemplateMaps>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::TemplateMaps& val) {
  StrongRef fbthrift_data(createStructTuple(7));
  StrongRef _fbthrift__std_map(
    Constructor<map<Bytes, Bytes, std::map<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.std_map_ref()));
  if (!_fbthrift__std_map ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[0],
          *_fbthrift__std_map) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__std_unordered(
    Constructor<map<Bytes, Bytes, std::unordered_map<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.std_unordered_ref()));
  if (!_fbthrift__std_unordered ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[1],
          *_fbthrift__std_unordered) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_fast(
    Constructor<map<Bytes, Bytes, folly::F14FastMap<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.folly_fast_ref()));
  if (!_fbthrift__folly_fast ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[2],
          *_fbthrift__folly_fast) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_node(
    Constructor<map<Bytes, Bytes, folly::F14NodeMap<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.folly_node_ref()));
  if (!_fbthrift__folly_node ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[3],
          *_fbthrift__folly_node) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_value(
    Constructor<map<Bytes, Bytes, folly::F14ValueMap<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.folly_value_ref()));
  if (!_fbthrift__folly_value ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[4],
          *_fbthrift__folly_value) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_vector(
    Constructor<map<Bytes, Bytes, folly::F14VectorMap<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.folly_vector_ref()));
  if (!_fbthrift__folly_vector ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[5],
          *_fbthrift__folly_vector) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__folly_sorted_vector(
    Constructor<map<Bytes, Bytes, folly::sorted_vector_map<native_t<Bytes>, native_t<Bytes>>>>{}
    .constructFrom(val.folly_sorted_vector_ref()));
  if (!_fbthrift__folly_sorted_vector ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TemplateMaps__tuple_pos[6],
          *_fbthrift__folly_sorted_vector) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::TWrapped>
Extractor<::test::fixtures::python_capi::TWrapped>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a TWrapped");
      }
      return extractorError<::test::fixtures::python_capi::TWrapped>(
          "Marshal error: TWrapped");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::TWrapped>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::TWrapped>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::TWrapped>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::TWrapped cpp;
  std::optional<std::string_view> error;
  Extractor<Bytes>{}.extractInto(
      cpp.fieldA_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TWrapped__tuple_pos[0]),
      error);
  Extractor<Bytes>{}.extractInto(
      cpp.fieldB_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__TWrapped__tuple_pos[1]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::TWrapped>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__TWrapped(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: TWrapped");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::TWrapped>::operator()(
    const ::test::fixtures::python_capi::TWrapped& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TWrapped>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__TWrapped(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::TWrapped>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::TWrapped& val) {
  StrongRef fbthrift_data(createStructTuple(2));
  StrongRef _fbthrift__fieldA(
    Constructor<Bytes>{}
    .constructFrom(val.fieldA_ref()));
  if (!_fbthrift__fieldA ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TWrapped__tuple_pos[0],
          *_fbthrift__fieldA) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__fieldB(
    Constructor<Bytes>{}
    .constructFrom(val.fieldB_ref()));
  if (!_fbthrift__fieldB ||
      setStructField(
          *fbthrift_data,
          _fbthrift__TWrapped__tuple_pos[1],
          *_fbthrift__fieldB) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::IndirectionA>
Extractor<::test::fixtures::python_capi::IndirectionA>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a IndirectionA");
      }
      return extractorError<::test::fixtures::python_capi::IndirectionA>(
          "Marshal error: IndirectionA");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::IndirectionA>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::IndirectionA>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::IndirectionA>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::IndirectionA cpp;
  std::optional<std::string_view> error;
  Extractor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>{}.extractInto(
      cpp.lst_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__IndirectionA__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::IndirectionA>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__IndirectionA(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: IndirectionA");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::IndirectionA>::operator()(
    const ::test::fixtures::python_capi::IndirectionA& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionA>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__IndirectionA(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionA>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::IndirectionA& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__lst(
    Constructor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>{}
    .constructFrom(val.lst_ref()));
  if (!_fbthrift__lst ||
      setStructField(
          *fbthrift_data,
          _fbthrift__IndirectionA__tuple_pos[0],
          *_fbthrift__lst) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::IndirectionB>
Extractor<::test::fixtures::python_capi::IndirectionB>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a IndirectionB");
      }
      return extractorError<::test::fixtures::python_capi::IndirectionB>(
          "Marshal error: IndirectionB");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::IndirectionB>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::IndirectionB>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::IndirectionB>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::IndirectionB cpp;
  std::optional<std::string_view> error;
  Extractor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>, std::vector<native_t<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>>>{}.extractInto(
      cpp.lst_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__IndirectionB__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::IndirectionB>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__IndirectionB(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: IndirectionB");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::IndirectionB>::operator()(
    const ::test::fixtures::python_capi::IndirectionB& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionB>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__IndirectionB(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionB>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::IndirectionB& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__lst(
    Constructor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>, std::vector<native_t<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>>>{}
    .constructFrom(val.lst_ref()));
  if (!_fbthrift__lst ||
      setStructField(
          *fbthrift_data,
          _fbthrift__IndirectionB__tuple_pos[0],
          *_fbthrift__lst) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::python_capi::IndirectionC>
Extractor<::test::fixtures::python_capi::IndirectionC>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a IndirectionC");
      }
      return extractorError<::test::fixtures::python_capi::IndirectionC>(
          "Marshal error: IndirectionC");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::python_capi::IndirectionC>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::python_capi::IndirectionC>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::python_capi::IndirectionC>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::python_capi::IndirectionC cpp;
  std::optional<std::string_view> error;
  Extractor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>{}.extractInto(
      cpp.lst_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__IndirectionC__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::python_capi::IndirectionC>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.python_capi.containers import error");
  }
  int result =
      can_extract__test__fixtures__python_capi__containers__IndirectionC(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: IndirectionC");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::python_capi::IndirectionC>::operator()(
    const ::test::fixtures::python_capi::IndirectionC& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionC>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__python_capi__containers__IndirectionC(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::python_capi::IndirectionC>>::operator()(
    [[maybe_unused]] const ::test::fixtures::python_capi::IndirectionC& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__lst(
    Constructor<list<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::python_capi::TWrapped>>>{}
    .constructFrom(val.lst_ref()));
  if (!_fbthrift__lst ||
      setStructField(
          *fbthrift_data,
          _fbthrift__IndirectionC__tuple_pos[0],
          *_fbthrift__lst) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


} // namespace capi
} // namespace python
} // namespace thrift
} // namespace apache
