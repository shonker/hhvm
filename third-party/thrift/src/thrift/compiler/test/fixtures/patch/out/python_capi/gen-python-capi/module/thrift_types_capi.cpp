
/**
 * Autogenerated by Thrift
 *
 * DO NOT EDIT
 *  @generated
 *
 */

#include <folly/python/import.h>
#include <thrift/lib/python/capi/iobuf.h>
#include <thrift/lib/python/types.h>

#include <thrift/compiler/test/fixtures/patch/gen-python-capi/module/thrift_types_api.h>
#include <thrift/compiler/test/fixtures/patch/gen-python-capi/module/thrift_types_capi.h>

#include "thrift/lib/thrift/gen-python-capi/patch/thrift_types_capi.h"
#include "thrift/lib/thrift/gen-python-capi/standard/thrift_types_capi.h"

namespace apache {
namespace thrift {
namespace python {
namespace capi {
namespace {
bool ensure_module_imported() {
  static ::folly::python::import_cache_nocapture import((
      ::import_test__fixtures__patch__module__thrift_types_capi));
  return import();
}
  static constexpr std::int16_t _fbthrift__MyData__tuple_pos[2] = {
    1, 2
  };
  static constexpr std::int16_t _fbthrift__MyDataWithCustomDefault__tuple_pos[2] = {
    1, 2
  };
  static constexpr std::int16_t _fbthrift__MyStruct__tuple_pos[33] = {
    32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 33
  };
  static constexpr std::int16_t _fbthrift__Recursive__tuple_pos[1] = {
    1
  };
  static constexpr std::int16_t _fbthrift__Bar__tuple_pos[1] = {
    1
  };
  static constexpr std::int16_t _fbthrift__Loop__tuple_pos[1] = {
    1
  };
  static constexpr std::int16_t _fbthrift__RefFields__tuple_pos[7] = {
    1, 2, 3, 4, 5, 6, 7
  };
} // namespace

ExtractorResult<::test::fixtures::patch::MyData>
Extractor<::test::fixtures::patch::MyData>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a MyData");
      }
      return extractorError<::test::fixtures::patch::MyData>(
          "Marshal error: MyData");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::MyData>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::MyData>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyData>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::MyData cpp;
  std::optional<std::string_view> error;
  Extractor<Bytes>{}.extractInto(
      cpp.data1_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyData__tuple_pos[0]),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.data2_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyData__tuple_pos[1]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::MyData>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyData(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyData");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyData>::operator()(
    const ::test::fixtures::patch::MyData& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyData>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__MyData(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyData>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::MyData& val) {
  StrongRef fbthrift_data(createStructTuple(2));
  StrongRef _fbthrift__data1(
    Constructor<Bytes>{}
    .constructFrom(val.data1_ref()));
  if (!_fbthrift__data1 ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyData__tuple_pos[0],
          *_fbthrift__data1) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__data2(
    Constructor<int32_t>{}
    .constructFrom(val.data2_ref()));
  if (!_fbthrift__data2 ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyData__tuple_pos[1],
          *_fbthrift__data2) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefault>
Extractor<::test::fixtures::patch::MyDataWithCustomDefault>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a MyDataWithCustomDefault");
      }
      return extractorError<::test::fixtures::patch::MyDataWithCustomDefault>(
          "Marshal error: MyDataWithCustomDefault");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::MyDataWithCustomDefault>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefault>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataWithCustomDefault>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::MyDataWithCustomDefault cpp;
  std::optional<std::string_view> error;
  Extractor<Bytes>{}.extractInto(
      cpp.data1_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyDataWithCustomDefault__tuple_pos[0]),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.data2_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyDataWithCustomDefault__tuple_pos[1]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::MyDataWithCustomDefault>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataWithCustomDefault(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataWithCustomDefault");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataWithCustomDefault>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefault& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefault>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__MyDataWithCustomDefault(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefault>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::MyDataWithCustomDefault& val) {
  StrongRef fbthrift_data(createStructTuple(2));
  StrongRef _fbthrift__data1(
    Constructor<Bytes>{}
    .constructFrom(val.data1_ref()));
  if (!_fbthrift__data1 ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyDataWithCustomDefault__tuple_pos[0],
          *_fbthrift__data1) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__data2(
    Constructor<int32_t>{}
    .constructFrom(val.data2_ref()));
  if (!_fbthrift__data2 ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyDataWithCustomDefault__tuple_pos[1],
          *_fbthrift__data2) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::InnerUnion>
Extractor<::test::fixtures::patch::InnerUnion>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a InnerUnion");
      }
      return extractorError<::test::fixtures::patch::InnerUnion>(
          "Marshal error: InnerUnion");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::InnerUnion>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::InnerUnion>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::InnerUnion>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::InnerUnion cpp;
  std::optional<std::string_view> error;
  auto type_tag = Extractor<int64_t>{}(PyTuple_GET_ITEM(fbThriftData, 0));
  if (type_tag.hasError()) {
    return folly::makeUnexpected(type_tag.error());
  }
  switch (*type_tag) {
    case 0:
      break; // union is unset
    case 1:
      Extractor<Bytes>{}.extractInto(
          cpp.innerOption_ref(), PyTuple_GET_ITEM(fbThriftData, 1), error);
      break;
  }
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::InnerUnion>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__InnerUnion(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: InnerUnion");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::InnerUnion>::operator()(
    const ::test::fixtures::patch::InnerUnion& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::InnerUnion>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__InnerUnion(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::InnerUnion>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::InnerUnion& val) {
  int64_t type_key = static_cast<int64_t>(val.getType());
  StrongRef py_val;
  switch (type_key) {
    case 0:
      Py_INCREF(Py_None);
      py_val = StrongRef(Py_None);
      break;
    case 1:
      py_val = StrongRef(
          Constructor<Bytes>{}
          .constructFrom(val.innerOption_ref()));
      break;
  }
  if (!py_val) {
    return nullptr;
  }
  return unionTupleFromValue(type_key, *py_val);
}


ExtractorResult<::test::fixtures::patch::MyUnion>
Extractor<::test::fixtures::patch::MyUnion>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a MyUnion");
      }
      return extractorError<::test::fixtures::patch::MyUnion>(
          "Marshal error: MyUnion");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::MyUnion>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::MyUnion>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyUnion>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::MyUnion cpp;
  std::optional<std::string_view> error;
  auto type_tag = Extractor<int64_t>{}(PyTuple_GET_ITEM(fbThriftData, 0));
  if (type_tag.hasError()) {
    return folly::makeUnexpected(type_tag.error());
  }
  switch (*type_tag) {
    case 0:
      break; // union is unset
    case 1:
      Extractor<Bytes>{}.extractInto(
          cpp.option1_ref(), PyTuple_GET_ITEM(fbThriftData, 1), error);
      break;
    case 2:
      Extractor<int32_t>{}.extractInto(
          cpp.option2_ref(), PyTuple_GET_ITEM(fbThriftData, 1), error);
      break;
    case 3:
      Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::InnerUnion>>{}.extractInto(
          cpp.option3_ref(), PyTuple_GET_ITEM(fbThriftData, 1), error);
      break;
  }
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::MyUnion>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyUnion(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyUnion");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyUnion>::operator()(
    const ::test::fixtures::patch::MyUnion& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyUnion>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__MyUnion(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyUnion>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::MyUnion& val) {
  int64_t type_key = static_cast<int64_t>(val.getType());
  StrongRef py_val;
  switch (type_key) {
    case 0:
      Py_INCREF(Py_None);
      py_val = StrongRef(Py_None);
      break;
    case 1:
      py_val = StrongRef(
          Constructor<Bytes>{}
          .constructFrom(val.option1_ref()));
      break;
    case 2:
      py_val = StrongRef(
          Constructor<int32_t>{}
          .constructFrom(val.option2_ref()));
      break;
    case 3:
      py_val = StrongRef(
          Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::InnerUnion>>{}
          .constructFrom(val.option3_ref()));
      break;
  }
  if (!py_val) {
    return nullptr;
  }
  return unionTupleFromValue(type_key, *py_val);
}


ExtractorResult<::test::fixtures::patch::MyStruct>
Extractor<::test::fixtures::patch::MyStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a MyStruct");
      }
      return extractorError<::test::fixtures::patch::MyStruct>(
          "Marshal error: MyStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::MyStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::MyStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::MyStruct cpp;
  std::optional<std::string_view> error;
  Extractor<bool>{}.extractInto(
      cpp.boolVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[0]),
      error);
  Extractor<int8_t>{}.extractInto(
      cpp.byteVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[1]),
      error);
  Extractor<int16_t>{}.extractInto(
      cpp.i16Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[2]),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.i32Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[3]),
      error);
  Extractor<int64_t>{}.extractInto(
      cpp.i64Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[4]),
      error);
  Extractor<float>{}.extractInto(
      cpp.floatVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[5]),
      error);
  Extractor<double>{}.extractInto(
      cpp.doubleVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[6]),
      error);
  Extractor<Bytes>{}.extractInto(
      cpp.stringVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[7]),
      error);
  Extractor<folly::IOBuf>{}.extractInto(
      cpp.binaryVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[8]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedEnum<::test::fixtures::patch::MyEnum>>{}.extractInto(
      cpp.enumVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[9]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}.extractInto(
      cpp.structVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[10]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyUnion>>{}.extractInto(
      cpp.unionVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[11]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::LateDefStruct>>{}.extractInto(
      cpp.lateStructVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[12]),
      error);
  Extractor<bool>{}.extractInto(
      cpp.optBoolVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[13]),
      error);
  Extractor<int8_t>{}.extractInto(
      cpp.optByteVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[14]),
      error);
  Extractor<int16_t>{}.extractInto(
      cpp.optI16Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[15]),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.optI32Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[16]),
      error);
  Extractor<int64_t>{}.extractInto(
      cpp.optI64Val_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[17]),
      error);
  Extractor<float>{}.extractInto(
      cpp.optFloatVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[18]),
      error);
  Extractor<double>{}.extractInto(
      cpp.optDoubleVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[19]),
      error);
  Extractor<Bytes>{}.extractInto(
      cpp.optStringVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[20]),
      error);
  Extractor<folly::IOBuf>{}.extractInto(
      cpp.optBinaryVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[21]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedEnum<::test::fixtures::patch::MyEnum>>{}.extractInto(
      cpp.optEnumVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[22]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}.extractInto(
      cpp.optStructVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[23]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::LateDefStruct>>{}.extractInto(
      cpp.optLateStructVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[24]),
      error);
  Extractor<list<int16_t>>{}.extractInto(
      cpp.optListVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[25]),
      error);
  Extractor<set<Bytes>>{}.extractInto(
      cpp.optSetVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[26]),
      error);
  Extractor<map<Bytes, Bytes>>{}.extractInto(
      cpp.optMapVal_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[27]),
      error);
  Extractor<list<map<Bytes, int32_t>>>{}.extractInto(
      cpp.listMap_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[28]),
      error);
  Extractor<map<Bytes, map<Bytes, int32_t>>>{}.extractInto(
      cpp.mapMap_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[29]),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.i32WithCustomDefault_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[30]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyDataWithCustomDefault>>{}.extractInto(
      cpp.structWithCustomDefault_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[31]),
      error);
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}.extractInto(
      cpp.structWithFieldCustomDefault_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__MyStruct__tuple_pos[32]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::MyStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStruct>::operator()(
    const ::test::fixtures::patch::MyStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStruct>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__MyStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStruct>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::MyStruct& val) {
  StrongRef fbthrift_data(createStructTuple(33));
  StrongRef _fbthrift__boolVal(
    Constructor<bool>{}
    .constructFrom(val.boolVal_ref()));
  if (!_fbthrift__boolVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[0],
          *_fbthrift__boolVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__byteVal(
    Constructor<int8_t>{}
    .constructFrom(val.byteVal_ref()));
  if (!_fbthrift__byteVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[1],
          *_fbthrift__byteVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__i16Val(
    Constructor<int16_t>{}
    .constructFrom(val.i16Val_ref()));
  if (!_fbthrift__i16Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[2],
          *_fbthrift__i16Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__i32Val(
    Constructor<int32_t>{}
    .constructFrom(val.i32Val_ref()));
  if (!_fbthrift__i32Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[3],
          *_fbthrift__i32Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__i64Val(
    Constructor<int64_t>{}
    .constructFrom(val.i64Val_ref()));
  if (!_fbthrift__i64Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[4],
          *_fbthrift__i64Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__floatVal(
    Constructor<float>{}
    .constructFrom(val.floatVal_ref()));
  if (!_fbthrift__floatVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[5],
          *_fbthrift__floatVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__doubleVal(
    Constructor<double>{}
    .constructFrom(val.doubleVal_ref()));
  if (!_fbthrift__doubleVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[6],
          *_fbthrift__doubleVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__stringVal(
    Constructor<Bytes>{}
    .constructFrom(val.stringVal_ref()));
  if (!_fbthrift__stringVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[7],
          *_fbthrift__stringVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__binaryVal(
    Constructor<folly::IOBuf>{}
    .constructFrom(val.binaryVal_ref()));
  if (!_fbthrift__binaryVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[8],
          *_fbthrift__binaryVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__enumVal(
    Constructor<::apache::thrift::python::capi::ComposedEnum<::test::fixtures::patch::MyEnum>>{}
    .constructFrom(val.enumVal_ref()));
  if (!_fbthrift__enumVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[9],
          *_fbthrift__enumVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__structVal(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}
    .constructFrom(val.structVal_ref()));
  if (!_fbthrift__structVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[10],
          *_fbthrift__structVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__unionVal(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyUnion>>{}
    .constructFrom(val.unionVal_ref()));
  if (!_fbthrift__unionVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[11],
          *_fbthrift__unionVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__lateStructVal(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::LateDefStruct>>{}
    .constructFrom(val.lateStructVal_ref()));
  if (!_fbthrift__lateStructVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[12],
          *_fbthrift__lateStructVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optBoolVal(
    Constructor<bool>{}
    .constructFrom(val.optBoolVal_ref()));
  if (_fbthrift__optBoolVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[13],
      Py_None);
  } else
  if (!_fbthrift__optBoolVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[13],
          *_fbthrift__optBoolVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optByteVal(
    Constructor<int8_t>{}
    .constructFrom(val.optByteVal_ref()));
  if (_fbthrift__optByteVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[14],
      Py_None);
  } else
  if (!_fbthrift__optByteVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[14],
          *_fbthrift__optByteVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optI16Val(
    Constructor<int16_t>{}
    .constructFrom(val.optI16Val_ref()));
  if (_fbthrift__optI16Val.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[15],
      Py_None);
  } else
  if (!_fbthrift__optI16Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[15],
          *_fbthrift__optI16Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optI32Val(
    Constructor<int32_t>{}
    .constructFrom(val.optI32Val_ref()));
  if (_fbthrift__optI32Val.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[16],
      Py_None);
  } else
  if (!_fbthrift__optI32Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[16],
          *_fbthrift__optI32Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optI64Val(
    Constructor<int64_t>{}
    .constructFrom(val.optI64Val_ref()));
  if (_fbthrift__optI64Val.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[17],
      Py_None);
  } else
  if (!_fbthrift__optI64Val ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[17],
          *_fbthrift__optI64Val) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optFloatVal(
    Constructor<float>{}
    .constructFrom(val.optFloatVal_ref()));
  if (_fbthrift__optFloatVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[18],
      Py_None);
  } else
  if (!_fbthrift__optFloatVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[18],
          *_fbthrift__optFloatVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optDoubleVal(
    Constructor<double>{}
    .constructFrom(val.optDoubleVal_ref()));
  if (_fbthrift__optDoubleVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[19],
      Py_None);
  } else
  if (!_fbthrift__optDoubleVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[19],
          *_fbthrift__optDoubleVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optStringVal(
    Constructor<Bytes>{}
    .constructFrom(val.optStringVal_ref()));
  if (_fbthrift__optStringVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[20],
      Py_None);
  } else
  if (!_fbthrift__optStringVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[20],
          *_fbthrift__optStringVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optBinaryVal(
    Constructor<folly::IOBuf>{}
    .constructFrom(val.optBinaryVal_ref()));
  if (_fbthrift__optBinaryVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[21],
      Py_None);
  } else
  if (!_fbthrift__optBinaryVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[21],
          *_fbthrift__optBinaryVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optEnumVal(
    Constructor<::apache::thrift::python::capi::ComposedEnum<::test::fixtures::patch::MyEnum>>{}
    .constructFrom(val.optEnumVal_ref()));
  if (_fbthrift__optEnumVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[22],
      Py_None);
  } else
  if (!_fbthrift__optEnumVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[22],
          *_fbthrift__optEnumVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optStructVal(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}
    .constructFrom(val.optStructVal_ref()));
  if (_fbthrift__optStructVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[23],
      Py_None);
  } else
  if (!_fbthrift__optStructVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[23],
          *_fbthrift__optStructVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optLateStructVal(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::LateDefStruct>>{}
    .constructFrom(val.optLateStructVal_ref()));
  if (_fbthrift__optLateStructVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[24],
      Py_None);
  } else
  if (!_fbthrift__optLateStructVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[24],
          *_fbthrift__optLateStructVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optListVal(
    Constructor<list<int16_t>>{}
    .constructFrom(val.optListVal_ref()));
  if (_fbthrift__optListVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[25],
      Py_None);
  } else
  if (!_fbthrift__optListVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[25],
          *_fbthrift__optListVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optSetVal(
    Constructor<set<Bytes>>{}
    .constructFrom(val.optSetVal_ref()));
  if (_fbthrift__optSetVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[26],
      Py_None);
  } else
  if (!_fbthrift__optSetVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[26],
          *_fbthrift__optSetVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__optMapVal(
    Constructor<map<Bytes, Bytes>>{}
    .constructFrom(val.optMapVal_ref()));
  if (_fbthrift__optMapVal.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__MyStruct__tuple_pos[27],
      Py_None);
  } else
  if (!_fbthrift__optMapVal ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[27],
          *_fbthrift__optMapVal) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__listMap(
    Constructor<list<map<Bytes, int32_t>>>{}
    .constructFrom(val.listMap_ref()));
  if (!_fbthrift__listMap ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[28],
          *_fbthrift__listMap) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__mapMap(
    Constructor<map<Bytes, map<Bytes, int32_t>>>{}
    .constructFrom(val.mapMap_ref()));
  if (!_fbthrift__mapMap ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[29],
          *_fbthrift__mapMap) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__i32WithCustomDefault(
    Constructor<int32_t>{}
    .constructFrom(val.i32WithCustomDefault_ref()));
  if (!_fbthrift__i32WithCustomDefault ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[30],
          *_fbthrift__i32WithCustomDefault) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__structWithCustomDefault(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyDataWithCustomDefault>>{}
    .constructFrom(val.structWithCustomDefault_ref()));
  if (!_fbthrift__structWithCustomDefault ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[31],
          *_fbthrift__structWithCustomDefault) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__structWithFieldCustomDefault(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::MyData>>{}
    .constructFrom(val.structWithFieldCustomDefault_ref()));
  if (!_fbthrift__structWithFieldCustomDefault ||
      setStructField(
          *fbthrift_data,
          _fbthrift__MyStruct__tuple_pos[32],
          *_fbthrift__structWithFieldCustomDefault) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::LateDefStruct>
Extractor<::test::fixtures::patch::LateDefStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a LateDefStruct");
      }
      return extractorError<::test::fixtures::patch::LateDefStruct>(
          "Marshal error: LateDefStruct");
  }
  return ::test::fixtures::patch::LateDefStruct{};
}

ExtractorResult<::test::fixtures::patch::LateDefStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LateDefStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::LateDefStruct cpp;
  (void)fbThriftData;
  return cpp;
}


int Extractor<::test::fixtures::patch::LateDefStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LateDefStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LateDefStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LateDefStruct>::operator()(
    const ::test::fixtures::patch::LateDefStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStruct>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__LateDefStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStruct>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::LateDefStruct& val) {
  StrongRef fbthrift_data(createStructTuple(0));
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::Recursive>
Extractor<::test::fixtures::patch::Recursive>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a Recursive");
      }
      return extractorError<::test::fixtures::patch::Recursive>(
          "Marshal error: Recursive");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::Recursive>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::Recursive>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::Recursive>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::Recursive cpp;
  std::optional<std::string_view> error;
  Extractor<map<Bytes, ::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Recursive>>>{}.extractInto(
      cpp.nodes_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__Recursive__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::Recursive>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__Recursive(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: Recursive");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::Recursive>::operator()(
    const ::test::fixtures::patch::Recursive& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Recursive>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__Recursive(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Recursive>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::Recursive& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__nodes(
    Constructor<map<Bytes, ::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Recursive>>>{}
    .constructFrom(val.nodes_ref()));
  if (!_fbthrift__nodes ||
      setStructField(
          *fbthrift_data,
          _fbthrift__Recursive__tuple_pos[0],
          *_fbthrift__nodes) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::Bar>
Extractor<::test::fixtures::patch::Bar>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a Bar");
      }
      return extractorError<::test::fixtures::patch::Bar>(
          "Marshal error: Bar");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::Bar>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::Bar>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::Bar>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::Bar cpp;
  std::optional<std::string_view> error;
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Loop>>{}.extractInto(
      cpp.loop_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__Bar__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::Bar>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__Bar(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: Bar");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::Bar>::operator()(
    const ::test::fixtures::patch::Bar& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Bar>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__Bar(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Bar>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::Bar& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__loop(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Loop>>{}
    .constructFrom(val.loop_ref()));
  if (!_fbthrift__loop ||
      setStructField(
          *fbthrift_data,
          _fbthrift__Bar__tuple_pos[0],
          *_fbthrift__loop) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::Loop>
Extractor<::test::fixtures::patch::Loop>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a Loop");
      }
      return extractorError<::test::fixtures::patch::Loop>(
          "Marshal error: Loop");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::Loop>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::Loop>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::Loop>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::Loop cpp;
  std::optional<std::string_view> error;
  Extractor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Bar>>{}.extractInto(
      cpp.bar_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__Loop__tuple_pos[0]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::Loop>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__Loop(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: Loop");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::Loop>::operator()(
    const ::test::fixtures::patch::Loop& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Loop>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__Loop(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::Loop>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::Loop& val) {
  StrongRef fbthrift_data(createStructTuple(1));
  StrongRef _fbthrift__bar(
    Constructor<::apache::thrift::python::capi::ComposedStruct<::test::fixtures::patch::Bar>>{}
    .constructFrom(val.bar_ref()));
  if (!_fbthrift__bar ||
      setStructField(
          *fbthrift_data,
          _fbthrift__Loop__tuple_pos[0],
          *_fbthrift__bar) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::RefFields>
Extractor<::test::fixtures::patch::RefFields>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a RefFields");
      }
      return extractorError<::test::fixtures::patch::RefFields>(
          "Marshal error: RefFields");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::patch::RefFields>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::patch::RefFields>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFields>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::patch::RefFields cpp;
  std::optional<std::string_view> error;
  Extractor<list<int32_t>>{}.extractInto(
      cpp.unique_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[0]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.shared_const_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[1]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.shared_mustable_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[2]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.opt_unique_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[3]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.opt_shared_const_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[4]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.opt_shared_mustable_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[5]),
      error);
  Extractor<list<int32_t>>{}.extractInto(
      cpp.opt_box_ref(),
      PyTuple_GET_ITEM(fbThriftData, _fbthrift__RefFields__tuple_pos[6]),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}


int Extractor<::test::fixtures::patch::RefFields>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFields(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFields");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFields>::operator()(
    const ::test::fixtures::patch::RefFields& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFields>> ctor;
  StrongRef fbthrift_data(ctor(val));
  if (!fbthrift_data) {
    return nullptr;
  }
  return init__test__fixtures__patch__module__RefFields(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFields>>::operator()(
    [[maybe_unused]] const ::test::fixtures::patch::RefFields& val) {
  StrongRef fbthrift_data(createStructTuple(7));
  StrongRef _fbthrift__unique(
    Constructor<list<int32_t>>{}
    .constructFrom(val.unique_ref()));
  if (!_fbthrift__unique ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[0],
          *_fbthrift__unique) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__shared_const(
    Constructor<list<int32_t>>{}
    .constructFrom(val.shared_const_ref()));
  if (!_fbthrift__shared_const ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[1],
          *_fbthrift__shared_const) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__shared_mustable(
    Constructor<list<int32_t>>{}
    .constructFrom(val.shared_mustable_ref()));
  if (!_fbthrift__shared_mustable ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[2],
          *_fbthrift__shared_mustable) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__opt_unique(
    Constructor<list<int32_t>>{}
    .constructFrom(val.opt_unique_ref()));
  if (_fbthrift__opt_unique.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__RefFields__tuple_pos[3],
      Py_None);
  } else
  if (!_fbthrift__opt_unique ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[3],
          *_fbthrift__opt_unique) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__opt_shared_const(
    Constructor<list<int32_t>>{}
    .constructFrom(val.opt_shared_const_ref()));
  if (_fbthrift__opt_shared_const.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__RefFields__tuple_pos[4],
      Py_None);
  } else
  if (!_fbthrift__opt_shared_const ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[4],
          *_fbthrift__opt_shared_const) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__opt_shared_mustable(
    Constructor<list<int32_t>>{}
    .constructFrom(val.opt_shared_mustable_ref()));
  if (_fbthrift__opt_shared_mustable.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__RefFields__tuple_pos[5],
      Py_None);
  } else
  if (!_fbthrift__opt_shared_mustable ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[5],
          *_fbthrift__opt_shared_mustable) == -1) {
    return nullptr;
  }
  StrongRef _fbthrift__opt_box(
    Constructor<list<int32_t>>{}
    .constructFrom(val.opt_box_ref()));
  if (_fbthrift__opt_box.isNone()) {
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(
      *fbthrift_data,
      _fbthrift__RefFields__tuple_pos[6],
      Py_None);
  } else
  if (!_fbthrift__opt_box ||
      setStructField(
          *fbthrift_data,
          _fbthrift__RefFields__tuple_pos[6],
          *_fbthrift__opt_box) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}


ExtractorResult<::test::fixtures::patch::MyDataPatchStruct>
Extractor<::test::fixtures::patch::MyDataPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataPatchStruct>(
        "Thrift serialize error: MyDataPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyDataPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyDataPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataPatchStruct>(
          "Init from fbthrift error: MyDataPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::MyDataPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataPatchStruct>::operator()(
    const ::test::fixtures::patch::MyDataPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyDataPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyDataPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataFieldPatchStruct>
Extractor<::test::fixtures::patch::MyDataFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataFieldPatchStruct>(
        "Thrift serialize error: MyDataFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyDataFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyDataFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataFieldPatchStruct>(
          "Init from fbthrift error: MyDataFieldPatch");
  }
  return Extractor<::test::fixtures::patch::MyDataFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::MyDataFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyDataFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyDataFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataEnsureStruct>
Extractor<::test::fixtures::patch::MyDataEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataEnsureStruct>(
        "Thrift serialize error: MyDataEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyDataEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataEnsureStruct>(
          "Init from fbthrift error: MyDataEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::MyDataEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataEnsureStruct>::operator()(
    const ::test::fixtures::patch::MyDataEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataEnsureStruct>>::operator()(
    const ::test::fixtures::patch::MyDataEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataSafePatch>
Extractor<::test::fixtures::patch::MyDataSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataSafePatch>(
        "Thrift serialize error: MyDataSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyDataSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataSafePatch>(
          "Init from fbthrift error: MyDataSafePatch");
  }
  return Extractor<::test::fixtures::patch::MyDataSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataSafePatch>::operator()(
    const ::test::fixtures::patch::MyDataSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataSafePatch>>::operator()(
    const ::test::fixtures::patch::MyDataSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>
Extractor<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataWithCustomDefaultPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>(
        "Thrift serialize error: MyDataWithCustomDefaultPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataWithCustomDefaultPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>(
          "Init from fbthrift error: MyDataWithCustomDefaultPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataWithCustomDefaultPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataWithCustomDefaultPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataWithCustomDefaultPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataWithCustomDefaultPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>
Extractor<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataWithCustomDefaultFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>(
        "Thrift serialize error: MyDataWithCustomDefaultFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataWithCustomDefaultFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>(
          "Init from fbthrift error: MyDataWithCustomDefaultFieldPatch");
  }
  return Extractor<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataWithCustomDefaultFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataWithCustomDefaultFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataWithCustomDefaultFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataWithCustomDefaultFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>
Extractor<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataWithCustomDefaultEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>(
        "Thrift serialize error: MyDataWithCustomDefaultEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataWithCustomDefaultEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>(
          "Init from fbthrift error: MyDataWithCustomDefaultEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataWithCustomDefaultEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataWithCustomDefaultEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataWithCustomDefaultEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataWithCustomDefaultEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>
Extractor<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyDataWithCustomDefaultSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>(
        "Thrift serialize error: MyDataWithCustomDefaultSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyDataWithCustomDefaultSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>(
          "Init from fbthrift error: MyDataWithCustomDefaultSafePatch");
  }
  return Extractor<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyDataWithCustomDefaultSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataWithCustomDefaultSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyDataWithCustomDefaultSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>>::operator()(
    const ::test::fixtures::patch::MyDataWithCustomDefaultSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyDataWithCustomDefaultSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::InnerUnionPatchStruct>
Extractor<::test::fixtures::patch::InnerUnionPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__InnerUnionPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::InnerUnionPatchStruct>(
        "Thrift serialize error: InnerUnionPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::InnerUnionPatchStruct, ::apache::thrift::op::detail::UnionPatchAdapter<::test::fixtures::patch::InnerUnionPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::InnerUnionPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::InnerUnionPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__InnerUnionPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::InnerUnionPatchStruct>(
          "Init from fbthrift error: InnerUnionPatch");
  }
  return Extractor<::test::fixtures::patch::InnerUnionPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::InnerUnionPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__InnerUnionPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: InnerUnionPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::InnerUnionPatchStruct>::operator()(
    const ::test::fixtures::patch::InnerUnionPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::UnionPatchAdapter<::test::fixtures::patch::InnerUnionPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__InnerUnionPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::InnerUnionPatchStruct>>::operator()(
    const ::test::fixtures::patch::InnerUnionPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::InnerUnionPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::InnerUnionFieldPatchStruct>
Extractor<::test::fixtures::patch::InnerUnionFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__InnerUnionFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::InnerUnionFieldPatchStruct>(
        "Thrift serialize error: InnerUnionFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::InnerUnionFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::InnerUnionFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::InnerUnionFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::InnerUnionFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__InnerUnionFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::InnerUnionFieldPatchStruct>(
          "Init from fbthrift error: InnerUnionFieldPatch");
  }
  return Extractor<::test::fixtures::patch::InnerUnionFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::InnerUnionFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__InnerUnionFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: InnerUnionFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::InnerUnionFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::InnerUnionFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::InnerUnionFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__InnerUnionFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::InnerUnionFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::InnerUnionFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::InnerUnionFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::InnerUnionSafePatch>
Extractor<::test::fixtures::patch::InnerUnionSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__InnerUnionSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::InnerUnionSafePatch>(
        "Thrift serialize error: InnerUnionSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::InnerUnionSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::InnerUnionSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::InnerUnionSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::InnerUnionSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__InnerUnionSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::InnerUnionSafePatch>(
          "Init from fbthrift error: InnerUnionSafePatch");
  }
  return Extractor<::test::fixtures::patch::InnerUnionSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::InnerUnionSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__InnerUnionSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: InnerUnionSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::InnerUnionSafePatch>::operator()(
    const ::test::fixtures::patch::InnerUnionSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__InnerUnionSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::InnerUnionSafePatch>>::operator()(
    const ::test::fixtures::patch::InnerUnionSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::InnerUnionSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyUnionPatchStruct>
Extractor<::test::fixtures::patch::MyUnionPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyUnionPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyUnionPatchStruct>(
        "Thrift serialize error: MyUnionPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyUnionPatchStruct, ::apache::thrift::op::detail::UnionPatchAdapter<::test::fixtures::patch::MyUnionPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyUnionPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyUnionPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyUnionPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyUnionPatchStruct>(
          "Init from fbthrift error: MyUnionPatch");
  }
  return Extractor<::test::fixtures::patch::MyUnionPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyUnionPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyUnionPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyUnionPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyUnionPatchStruct>::operator()(
    const ::test::fixtures::patch::MyUnionPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::UnionPatchAdapter<::test::fixtures::patch::MyUnionPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyUnionPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyUnionPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyUnionPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyUnionPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyUnionFieldPatchStruct>
Extractor<::test::fixtures::patch::MyUnionFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyUnionFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyUnionFieldPatchStruct>(
        "Thrift serialize error: MyUnionFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyUnionFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyUnionFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyUnionFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyUnionFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyUnionFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyUnionFieldPatchStruct>(
          "Init from fbthrift error: MyUnionFieldPatch");
  }
  return Extractor<::test::fixtures::patch::MyUnionFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyUnionFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyUnionFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyUnionFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyUnionFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::MyUnionFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyUnionFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyUnionFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyUnionFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyUnionFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyUnionFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyUnionSafePatch>
Extractor<::test::fixtures::patch::MyUnionSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyUnionSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyUnionSafePatch>(
        "Thrift serialize error: MyUnionSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyUnionSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyUnionSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyUnionSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyUnionSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyUnionSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyUnionSafePatch>(
          "Init from fbthrift error: MyUnionSafePatch");
  }
  return Extractor<::test::fixtures::patch::MyUnionSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyUnionSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyUnionSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyUnionSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyUnionSafePatch>::operator()(
    const ::test::fixtures::patch::MyUnionSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyUnionSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyUnionSafePatch>>::operator()(
    const ::test::fixtures::patch::MyUnionSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyUnionSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructPatchStruct>
Extractor<::test::fixtures::patch::MyStructPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructPatchStruct>(
        "Thrift serialize error: MyStructPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyStructPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructPatchStruct>(
          "Init from fbthrift error: MyStructPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::MyStructPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructPatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::MyStructPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField10PatchStruct>
Extractor<::test::fixtures::patch::MyStructField10PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField10PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField10Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField10PatchStruct>(
        "Thrift serialize error: MyStructField10Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField10PatchStruct, ::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::MyStructField10PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField10PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField10PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField10PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField10Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField10PatchStruct>(
          "Init from fbthrift error: MyStructField10Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField10PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField10PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField10Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField10Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField10PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField10PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::MyStructField10PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField10Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField10PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField10PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField10PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField23PatchStruct>
Extractor<::test::fixtures::patch::MyStructField23PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField23PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField23Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField23PatchStruct>(
        "Thrift serialize error: MyStructField23Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField23PatchStruct, ::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::MyStructField23PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField23PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField23PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField23PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField23Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField23PatchStruct>(
          "Init from fbthrift error: MyStructField23Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField23PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField23PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField23Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField23Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField23PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField23PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::MyStructField23PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField23Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField23PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField23PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField23PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField26PatchStruct>
Extractor<::test::fixtures::patch::MyStructField26PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField26PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField26Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField26PatchStruct>(
        "Thrift serialize error: MyStructField26Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField26PatchStruct, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::MyStructField26PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField26PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField26PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField26PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField26Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField26PatchStruct>(
          "Init from fbthrift error: MyStructField26Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField26PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField26PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField26Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField26Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField26PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField26PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::MyStructField26PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField26Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField26PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField26PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField26PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField27PatchStruct>
Extractor<::test::fixtures::patch::MyStructField27PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField27PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField27Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField27PatchStruct>(
        "Thrift serialize error: MyStructField27Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField27PatchStruct, ::apache::thrift::op::detail::SetPatchAdapter<::test::fixtures::patch::MyStructField27PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField27PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField27PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField27PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField27Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField27PatchStruct>(
          "Init from fbthrift error: MyStructField27Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField27PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField27PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField27Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField27Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField27PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField27PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::SetPatchAdapter<::test::fixtures::patch::MyStructField27PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField27Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField27PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField27PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField27PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField28PatchStruct>
Extractor<::test::fixtures::patch::MyStructField28PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField28PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField28Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField28PatchStruct>(
        "Thrift serialize error: MyStructField28Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField28PatchStruct, ::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField28PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField28PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField28PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField28PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField28Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField28PatchStruct>(
          "Init from fbthrift error: MyStructField28Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField28PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField28PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField28Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField28Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField28PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField28PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField28PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField28Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField28PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField28PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField28PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField29PatchStruct>
Extractor<::test::fixtures::patch::MyStructField29PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField29PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField29Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField29PatchStruct>(
        "Thrift serialize error: MyStructField29Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField29PatchStruct, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::MyStructField29PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField29PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField29PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField29PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField29Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField29PatchStruct>(
          "Init from fbthrift error: MyStructField29Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField29PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField29PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField29Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField29Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField29PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField29PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::MyStructField29PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField29Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField29PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField29PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField29PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField30PatchStruct>
Extractor<::test::fixtures::patch::MyStructField30PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField30PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField30Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField30PatchStruct>(
        "Thrift serialize error: MyStructField30Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField30PatchStruct, ::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField30PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField30PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField30PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField30PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField30Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField30PatchStruct>(
          "Init from fbthrift error: MyStructField30Patch");
  }
  return Extractor<::test::fixtures::patch::MyStructField30PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField30PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField30Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField30Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField30PatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructField30PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField30PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField30Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField30PatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructField30PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField30PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructField30Patch1Struct>
Extractor<::test::fixtures::patch::MyStructField30Patch1Struct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField30Patch1Struct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructField30Patch1(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructField30Patch1Struct>(
        "Thrift serialize error: MyStructField30Patch1");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructField30Patch1Struct, ::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField30Patch1Struct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructField30Patch1Struct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructField30Patch1Struct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructField30Patch1Struct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructField30Patch1(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructField30Patch1Struct>(
          "Init from fbthrift error: MyStructField30Patch1");
  }
  return Extractor<::test::fixtures::patch::MyStructField30Patch1Struct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructField30Patch1Struct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructField30Patch1(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField30Patch1");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructField30Patch1Struct>::operator()(
    const ::test::fixtures::patch::MyStructField30Patch1Struct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::patch::MyStructField30Patch1Struct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructField30Patch1(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructField30Patch1Struct>>::operator()(
    const ::test::fixtures::patch::MyStructField30Patch1Struct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructField30Patch1Struct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructFieldPatchStruct>
Extractor<::test::fixtures::patch::MyStructFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructFieldPatchStruct>(
        "Thrift serialize error: MyStructFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::MyStructFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyStructFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructFieldPatchStruct>(
          "Init from fbthrift error: MyStructFieldPatch");
  }
  return Extractor<::test::fixtures::patch::MyStructFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::MyStructFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::MyStructFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::MyStructFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructEnsureStruct>
Extractor<::test::fixtures::patch::MyStructEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructEnsureStruct>(
        "Thrift serialize error: MyStructEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyStructEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructEnsureStruct>(
          "Init from fbthrift error: MyStructEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::MyStructEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructEnsureStruct>::operator()(
    const ::test::fixtures::patch::MyStructEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructEnsureStruct>>::operator()(
    const ::test::fixtures::patch::MyStructEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyStructSafePatch>
Extractor<::test::fixtures::patch::MyStructSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__MyStructSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::MyStructSafePatch>(
        "Thrift serialize error: MyStructSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::MyStructSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::MyStructSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::MyStructSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::MyStructSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__MyStructSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::MyStructSafePatch>(
          "Init from fbthrift error: MyStructSafePatch");
  }
  return Extractor<::test::fixtures::patch::MyStructSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::MyStructSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyStructSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyStructSafePatch>::operator()(
    const ::test::fixtures::patch::MyStructSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__MyStructSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::MyStructSafePatch>>::operator()(
    const ::test::fixtures::patch::MyStructSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::MyStructSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LateDefStructPatchStruct>
Extractor<::test::fixtures::patch::LateDefStructPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LateDefStructPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LateDefStructPatchStruct>(
        "Thrift serialize error: LateDefStructPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::LateDefStructPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::LateDefStructPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LateDefStructPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LateDefStructPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LateDefStructPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LateDefStructPatchStruct>(
          "Init from fbthrift error: LateDefStructPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::LateDefStructPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::LateDefStructPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LateDefStructPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LateDefStructPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LateDefStructPatchStruct>::operator()(
    const ::test::fixtures::patch::LateDefStructPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::LateDefStructPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LateDefStructPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStructPatchStruct>>::operator()(
    const ::test::fixtures::patch::LateDefStructPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LateDefStructPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LateDefStructFieldPatchStruct>
Extractor<::test::fixtures::patch::LateDefStructFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LateDefStructFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LateDefStructFieldPatchStruct>(
        "Thrift serialize error: LateDefStructFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::LateDefStructFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::LateDefStructFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LateDefStructFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LateDefStructFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LateDefStructFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LateDefStructFieldPatchStruct>(
          "Init from fbthrift error: LateDefStructFieldPatch");
  }
  return Extractor<::test::fixtures::patch::LateDefStructFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::LateDefStructFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LateDefStructFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LateDefStructFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LateDefStructFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::LateDefStructFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::LateDefStructFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LateDefStructFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStructFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::LateDefStructFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LateDefStructFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LateDefStructEnsureStruct>
Extractor<::test::fixtures::patch::LateDefStructEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LateDefStructEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LateDefStructEnsureStruct>(
        "Thrift serialize error: LateDefStructEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::LateDefStructEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LateDefStructEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LateDefStructEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LateDefStructEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LateDefStructEnsureStruct>(
          "Init from fbthrift error: LateDefStructEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::LateDefStructEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::LateDefStructEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LateDefStructEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LateDefStructEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LateDefStructEnsureStruct>::operator()(
    const ::test::fixtures::patch::LateDefStructEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LateDefStructEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStructEnsureStruct>>::operator()(
    const ::test::fixtures::patch::LateDefStructEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LateDefStructEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LateDefStructSafePatch>
Extractor<::test::fixtures::patch::LateDefStructSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LateDefStructSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LateDefStructSafePatch>(
        "Thrift serialize error: LateDefStructSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::LateDefStructSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LateDefStructSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LateDefStructSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LateDefStructSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LateDefStructSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LateDefStructSafePatch>(
          "Init from fbthrift error: LateDefStructSafePatch");
  }
  return Extractor<::test::fixtures::patch::LateDefStructSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::LateDefStructSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LateDefStructSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LateDefStructSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LateDefStructSafePatch>::operator()(
    const ::test::fixtures::patch::LateDefStructSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LateDefStructSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LateDefStructSafePatch>>::operator()(
    const ::test::fixtures::patch::LateDefStructSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LateDefStructSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RecursivePatchStruct>
Extractor<::test::fixtures::patch::RecursivePatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursivePatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RecursivePatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RecursivePatchStruct>(
        "Thrift serialize error: RecursivePatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RecursivePatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::RecursivePatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RecursivePatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RecursivePatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursivePatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RecursivePatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RecursivePatchStruct>(
          "Init from fbthrift error: RecursivePatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::RecursivePatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RecursivePatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RecursivePatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RecursivePatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RecursivePatchStruct>::operator()(
    const ::test::fixtures::patch::RecursivePatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::RecursivePatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RecursivePatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RecursivePatchStruct>>::operator()(
    const ::test::fixtures::patch::RecursivePatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RecursivePatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RecursiveField1PatchStruct>
Extractor<::test::fixtures::patch::RecursiveField1PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveField1PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RecursiveField1Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RecursiveField1PatchStruct>(
        "Thrift serialize error: RecursiveField1Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RecursiveField1PatchStruct, ::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::RecursiveField1PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RecursiveField1PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RecursiveField1PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveField1PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RecursiveField1Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RecursiveField1PatchStruct>(
          "Init from fbthrift error: RecursiveField1Patch");
  }
  return Extractor<::test::fixtures::patch::RecursiveField1PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RecursiveField1PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RecursiveField1Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RecursiveField1Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RecursiveField1PatchStruct>::operator()(
    const ::test::fixtures::patch::RecursiveField1PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::RecursiveField1PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RecursiveField1Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RecursiveField1PatchStruct>>::operator()(
    const ::test::fixtures::patch::RecursiveField1PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RecursiveField1PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RecursiveFieldPatchStruct>
Extractor<::test::fixtures::patch::RecursiveFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RecursiveFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RecursiveFieldPatchStruct>(
        "Thrift serialize error: RecursiveFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RecursiveFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::RecursiveFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RecursiveFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RecursiveFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RecursiveFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RecursiveFieldPatchStruct>(
          "Init from fbthrift error: RecursiveFieldPatch");
  }
  return Extractor<::test::fixtures::patch::RecursiveFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RecursiveFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RecursiveFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RecursiveFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RecursiveFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::RecursiveFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::RecursiveFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RecursiveFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RecursiveFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::RecursiveFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RecursiveFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RecursiveEnsureStruct>
Extractor<::test::fixtures::patch::RecursiveEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RecursiveEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RecursiveEnsureStruct>(
        "Thrift serialize error: RecursiveEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::RecursiveEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RecursiveEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RecursiveEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RecursiveEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RecursiveEnsureStruct>(
          "Init from fbthrift error: RecursiveEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::RecursiveEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RecursiveEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RecursiveEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RecursiveEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RecursiveEnsureStruct>::operator()(
    const ::test::fixtures::patch::RecursiveEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RecursiveEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RecursiveEnsureStruct>>::operator()(
    const ::test::fixtures::patch::RecursiveEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RecursiveEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RecursiveSafePatch>
Extractor<::test::fixtures::patch::RecursiveSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RecursiveSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RecursiveSafePatch>(
        "Thrift serialize error: RecursiveSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::RecursiveSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RecursiveSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RecursiveSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RecursiveSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RecursiveSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RecursiveSafePatch>(
          "Init from fbthrift error: RecursiveSafePatch");
  }
  return Extractor<::test::fixtures::patch::RecursiveSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::RecursiveSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RecursiveSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RecursiveSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RecursiveSafePatch>::operator()(
    const ::test::fixtures::patch::RecursiveSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RecursiveSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RecursiveSafePatch>>::operator()(
    const ::test::fixtures::patch::RecursiveSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RecursiveSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::BarPatchStruct>
Extractor<::test::fixtures::patch::BarPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__BarPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::BarPatchStruct>(
        "Thrift serialize error: BarPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::BarPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::BarPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::BarPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::BarPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__BarPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::BarPatchStruct>(
          "Init from fbthrift error: BarPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::BarPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::BarPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__BarPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: BarPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::BarPatchStruct>::operator()(
    const ::test::fixtures::patch::BarPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::BarPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__BarPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::BarPatchStruct>>::operator()(
    const ::test::fixtures::patch::BarPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::BarPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::BarFieldPatchStruct>
Extractor<::test::fixtures::patch::BarFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__BarFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::BarFieldPatchStruct>(
        "Thrift serialize error: BarFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::BarFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::BarFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::BarFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::BarFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__BarFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::BarFieldPatchStruct>(
          "Init from fbthrift error: BarFieldPatch");
  }
  return Extractor<::test::fixtures::patch::BarFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::BarFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__BarFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: BarFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::BarFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::BarFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::BarFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__BarFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::BarFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::BarFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::BarFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::BarEnsureStruct>
Extractor<::test::fixtures::patch::BarEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__BarEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::BarEnsureStruct>(
        "Thrift serialize error: BarEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::BarEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::BarEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::BarEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__BarEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::BarEnsureStruct>(
          "Init from fbthrift error: BarEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::BarEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::BarEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__BarEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: BarEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::BarEnsureStruct>::operator()(
    const ::test::fixtures::patch::BarEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__BarEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::BarEnsureStruct>>::operator()(
    const ::test::fixtures::patch::BarEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::BarEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::BarSafePatch>
Extractor<::test::fixtures::patch::BarSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__BarSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::BarSafePatch>(
        "Thrift serialize error: BarSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::BarSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::BarSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::BarSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::BarSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__BarSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::BarSafePatch>(
          "Init from fbthrift error: BarSafePatch");
  }
  return Extractor<::test::fixtures::patch::BarSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::BarSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__BarSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: BarSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::BarSafePatch>::operator()(
    const ::test::fixtures::patch::BarSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__BarSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::BarSafePatch>>::operator()(
    const ::test::fixtures::patch::BarSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::BarSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LoopPatchStruct>
Extractor<::test::fixtures::patch::LoopPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LoopPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LoopPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LoopPatchStruct>(
        "Thrift serialize error: LoopPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::LoopPatchStruct, ::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::LoopPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LoopPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LoopPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LoopPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LoopPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LoopPatchStruct>(
          "Init from fbthrift error: LoopPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::LoopPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::LoopPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LoopPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LoopPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LoopPatchStruct>::operator()(
    const ::test::fixtures::patch::LoopPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::patch::LoopPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LoopPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LoopPatchStruct>>::operator()(
    const ::test::fixtures::patch::LoopPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LoopPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::LoopSafePatch>
Extractor<::test::fixtures::patch::LoopSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LoopSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__LoopSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::LoopSafePatch>(
        "Thrift serialize error: LoopSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::LoopSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::LoopSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::LoopSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::LoopSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__LoopSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::LoopSafePatch>(
          "Init from fbthrift error: LoopSafePatch");
  }
  return Extractor<::test::fixtures::patch::LoopSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::LoopSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__LoopSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: LoopSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::LoopSafePatch>::operator()(
    const ::test::fixtures::patch::LoopSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__LoopSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::LoopSafePatch>>::operator()(
    const ::test::fixtures::patch::LoopSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::LoopSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsPatchStruct>
Extractor<::test::fixtures::patch::RefFieldsPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsPatchStructInternalDoNotUse(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsPatchStruct>(
        "Thrift serialize error: RefFieldsPatchStructInternalDoNotUse");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RefFieldsPatchStruct, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::RefFieldsPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsPatchStructInternalDoNotUse(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsPatchStruct>(
          "Init from fbthrift error: RefFieldsPatchStructInternalDoNotUse");
  }
  return Extractor<::test::fixtures::patch::RefFieldsPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsPatchStructInternalDoNotUse(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsPatchStructInternalDoNotUse");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsPatchStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::patch::RefFieldsPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsPatchStructInternalDoNotUse(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsPatchStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsField1PatchStruct>
Extractor<::test::fixtures::patch::RefFieldsField1PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField1PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsField1Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsField1PatchStruct>(
        "Thrift serialize error: RefFieldsField1Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RefFieldsField1PatchStruct, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField1PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsField1PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsField1PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField1PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsField1Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsField1PatchStruct>(
          "Init from fbthrift error: RefFieldsField1Patch");
  }
  return Extractor<::test::fixtures::patch::RefFieldsField1PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsField1PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsField1Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsField1Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsField1PatchStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsField1PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField1PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsField1Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsField1PatchStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsField1PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsField1PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsField4PatchStruct>
Extractor<::test::fixtures::patch::RefFieldsField4PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField4PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsField4Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsField4PatchStruct>(
        "Thrift serialize error: RefFieldsField4Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RefFieldsField4PatchStruct, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField4PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsField4PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsField4PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField4PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsField4Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsField4PatchStruct>(
          "Init from fbthrift error: RefFieldsField4Patch");
  }
  return Extractor<::test::fixtures::patch::RefFieldsField4PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsField4PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsField4Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsField4Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsField4PatchStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsField4PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField4PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsField4Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsField4PatchStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsField4PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsField4PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsField7PatchStruct>
Extractor<::test::fixtures::patch::RefFieldsField7PatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField7PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsField7Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsField7PatchStruct>(
        "Thrift serialize error: RefFieldsField7Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RefFieldsField7PatchStruct, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField7PatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsField7PatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsField7PatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsField7PatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsField7Patch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsField7PatchStruct>(
          "Init from fbthrift error: RefFieldsField7Patch");
  }
  return Extractor<::test::fixtures::patch::RefFieldsField7PatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsField7PatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsField7Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsField7Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsField7PatchStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsField7PatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::patch::RefFieldsField7PatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsField7Patch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsField7PatchStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsField7PatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsField7PatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsFieldPatchStruct>
Extractor<::test::fixtures::patch::RefFieldsFieldPatchStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsFieldPatchStruct>(
        "Thrift serialize error: RefFieldsFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::patch::RefFieldsFieldPatchStruct, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::RefFieldsFieldPatchStruct>
    >(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsFieldPatchStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsFieldPatchStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsFieldPatchStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsFieldPatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsFieldPatchStruct>(
          "Init from fbthrift error: RefFieldsFieldPatch");
  }
  return Extractor<::test::fixtures::patch::RefFieldsFieldPatchStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsFieldPatchStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsFieldPatchStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsFieldPatchStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::patch::RefFieldsFieldPatchStruct>>(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsFieldPatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsFieldPatchStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsFieldPatchStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsFieldPatchStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsEnsureStruct>
Extractor<::test::fixtures::patch::RefFieldsEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsEnsureStruct>(
        "Thrift serialize error: RefFieldsEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::RefFieldsEnsureStruct>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsEnsureStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsEnsureStruct>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsEnsureStruct>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsEnsureStruct(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsEnsureStruct>(
          "Init from fbthrift error: RefFieldsEnsureStruct");
  }
  return Extractor<::test::fixtures::patch::RefFieldsEnsureStruct>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsEnsureStruct>::operator()(
    const ::test::fixtures::patch::RefFieldsEnsureStruct& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsEnsureStruct(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsEnsureStruct>>::operator()(
    const ::test::fixtures::patch::RefFieldsEnsureStruct& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsEnsureStruct>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::RefFieldsSafePatch>
Extractor<::test::fixtures::patch::RefFieldsSafePatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__patch__module__RefFieldsSafePatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::patch::RefFieldsSafePatch>(
        "Thrift serialize error: RefFieldsSafePatch");
  }
  return detail::deserialize_iobuf<::test::fixtures::patch::RefFieldsSafePatch>(std::move(val));
}


ExtractorResult<::test::fixtures::patch::RefFieldsSafePatch>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::patch::RefFieldsSafePatch>>::operator()(PyObject* fbthrift_data) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::patch::RefFieldsSafePatch>(
      "Module test.fixtures.patch.module import error");
  }
  auto obj = StrongRef(init__test__fixtures__patch__module__RefFieldsSafePatch(fbthrift_data));
  if (!obj) {
      return extractorError<::test::fixtures::patch::RefFieldsSafePatch>(
          "Init from fbthrift error: RefFieldsSafePatch");
  }
  return Extractor<::test::fixtures::patch::RefFieldsSafePatch>{}(*obj);
}

int Extractor<::test::fixtures::patch::RefFieldsSafePatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__RefFieldsSafePatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: RefFieldsSafePatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::RefFieldsSafePatch>::operator()(
    const ::test::fixtures::patch::RefFieldsSafePatch& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  ::std::unique_ptr<::folly::IOBuf> serialized;
  try {
    serialized = detail::serialize_to_iobuf(val);
  } catch (const apache::thrift::TProtocolException& e) {
    detail::handle_protocol_error(e);
    return nullptr;
  }
  DCHECK(serialized);
  auto ptr = construct__test__fixtures__patch__module__RefFieldsSafePatch(std::move(serialized));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::patch::RefFieldsSafePatch>>::operator()(
    const ::test::fixtures::patch::RefFieldsSafePatch& val) {
  auto obj = StrongRef(Constructor<::test::fixtures::patch::RefFieldsSafePatch>{}(val));
  if (!obj) {
    return nullptr;
  }
  return getThriftData(*obj);
}

ExtractorResult<::test::fixtures::patch::MyEnum>
Extractor<::test::fixtures::patch::MyEnum>::operator()(PyObject* obj) {
  long val = PyLong_AsLong(obj);
  if (val == -1 && PyErr_Occurred()) {
    return extractorError<::test::fixtures::patch::MyEnum>(
        "Error getting python int value: MyEnum");
  }
  return static_cast<::test::fixtures::patch::MyEnum>(val);
}

int Extractor<::test::fixtures::patch::MyEnum>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.patch.module import error");
  }
  int result =
      can_extract__test__fixtures__patch__module__MyEnum(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyEnum");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::patch::MyEnum>::operator()(
    ::test::fixtures::patch::MyEnum val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__patch__module__MyEnum(
      static_cast<int64_t>(val));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}

} // namespace capi
} // namespace python
} // namespace thrift
} // namespace apache
